server:
  port: ${PORT:8080}

spring:
  application:
    name: submission-service
  rabbitmq:
    host: ${SPRING_RABBITMQ_HOST:localhost}
    port: ${SPRING_RABBITMQ_PORT:5672}
    username: ${SPRING_RABBITMQ_USERNAME:user}
    password: ${SPRING_RABBITMQ_PASSWORD:user}
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${JWT_ISSUER_URI:http://localhost:8080/realms/leadgen}
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:localhost}
      port: ${SPRING_DATA_REDIS_PORT:6379}
    mongodb:
      uri: ${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/submission_db}

rabbitmq:
  exchange: leadgen.exchange
  routing-key: submission.submission.created
  form-schema-queue:
    queue: submission.formschema.queue
    routing-key: formschema.schema.updated
  campaign-queue:
    queue: submission.campaign.queue
    routing-key: campaign.campaign.updated

logging:
  level:
    root: INFO
    submission: DEBUG
    org.springframework: WARN
    org.springframework.amqp: INFO
  file:
    name: logs/${spring.application.name}.log
  logback:
    rollingpolicy:
      max-file-size: 10MB
      max-history: 7
  pattern:
    console: "%d{HH:mm:ss} %highlight(%-5level) %cyan(%logger{20}) - %msg%n"

management:
  endpoints:
    web:
      exposure:
        include: health, prometheus, metrics
      base-path: /actuator
  endpoint:
    metrics:
      tags:
        application: ${spring.application.name}
    health:
      show-details: always
  health:
    rabbit:
      enabled: true
